<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚ØµØµ Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡ ÙˆØ§Ù„ØµØ­Ø§Ø¨Ø©</title>
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ· -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg: #0f2a24;
            --card: #163b33;
            --primary: #d4af37;
            --text: #ffffff;
            --muted: #cfd8d3;
            --hover: #1c4a40;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        
        /* Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        .page {
            display: none;
            padding: 16px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .page.active {
            display: block;
        }
        
        /* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-header {
            text-align: center;
            padding: 20px 16px;
            border-bottom: 2px solid var(--primary);
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        /* Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ */
        .back-btn {
            background: transparent;
            border: none;
            color: var(--muted);
            font-size: 16px;
            padding: 10px 0;
            cursor: pointer;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-btn:hover {
            color: var(--primary);
        }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .category-list, .stories-list {
            display: grid;
            gap: 12px;
        }
        
        /* Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .category-item, .story-item {
            background: var(--card);
            padding: 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .category-item:hover, .story-item:hover {
            background: var(--hover);
            transform: translateY(-3px);
            border-color: var(--primary);
        }
        
        .category-item h3, .story-item h3 {
            margin-bottom: 5px;
            color: var(--primary);
        }
        
        /* ØµÙØ­Ø© Ø§Ù„Ù‚ØµØ© */
        .story-content {
            font-family: 'Amiri', serif;
            font-size: 20px;
            line-height: 1.8;
            text-align: justify;
        }
        
        .story-content p {
            margin-bottom: 20px;
        }
        
        /* Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--muted);
            font-size: 18px;
        }
        
        .loading.hidden {
            display: none;
        }
        
        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ */
        .error {
            text-align: center;
            padding: 40px;
            color: #ff6b6b;
            border: 1px solid #ff6b6b;
            border-radius: 12px;
            margin: 20px;
        }
        
        .error.hidden {
            display: none;
        }
        
        /* Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙ†Ù‚Ù„ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ */
        .nav-links {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--card);
        }
        
        .nav-btn {
            background: var(--card);
            color: var(--text);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            transition: background 0.3s;
        }
        
        .nav-btn:hover {
            background: var(--hover);
        }
        
        /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 600px) {
            .page {
                padding: 10px;
            }
            
            .story-content {
                font-size: 18px;
                line-height: 1.7;
            }
            
            .category-item, .story-item {
                padding: 12px;
            }
        }
    </style>
</head>
<body>

<!-- Ø§Ù„ØµÙØ­Ø© 1: Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
<div id="categoriesPage" class="page active">
    <header class="main-header">
        <h1>ğŸ“– Ù‚ØµØµ Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡ ÙˆØ§Ù„ØµØ­Ø§Ø¨Ø©</h1>
        <p style="color: var(--muted); font-size: 14px; margin-top: 5px;">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØµ</p>
    </header>
    
    <div id="categoriesList" class="category-list">
        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù‡Ù†Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
    </div>
    
    <div id="categoriesError" class="error hidden">
        âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    </div>
</div>

<!-- Ø§Ù„ØµÙØ­Ø© 2: Ù‚Ø§Ø¦Ù…Ø© Ù‚ØµØµ Ø§Ù„Ù‚Ø³Ù… -->
<div id="storiesPage" class="page">
    <button class="back-btn" onclick="showPage('categoriesPage')">
        â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø£Ù‚Ø³Ø§Ù…
    </button>
    
    <header class="main-header">
        <h1 id="sectionTitle">Ù‚ØµØµ Ø§Ù„Ù‚Ø³Ù…</h1>
    </header>
    
    <div id="storiesList" class="stories-list">
        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù‚ØµØµ Ù‡Ù†Ø§ -->
    </div>
    
    <div id="storiesError" class="error hidden">
        âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ù‚ØµØµ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù…
    </div>
</div>

<!-- Ø§Ù„ØµÙØ­Ø© 3: Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØ© -->
<div id="storyPage" class="page">
    <button class="back-btn" onclick="showPage('storiesPage')">
        â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù‚ØµØµ
    </button>
    
    <header class="main-header">
        <h1 id="storyTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚ØµØ©</h1>
    </header>
    
    <div id="loading" class="loading">
        Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ØµØ©...
    </div>
    
    <div id="storyContent" class="story-content">
        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚ØµØ© Ù‡Ù†Ø§ -->
    </div>
    
    <div id="storyError" class="error hidden">
        âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ØµØ©
    </div>
    
    <div class="nav-links">
        <button class="nav-btn" onclick="loadPreviousStory()">Ø§Ù„Ù‚ØµØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</button>
        <button class="nav-btn" onclick="showPage('storiesPage')">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚ØµØµ</button>
        <button class="nav-btn" onclick="loadNextStory()">Ø§Ù„Ù‚ØµØ© Ø§Ù„ØªØ§Ù„ÙŠØ©</button>
    </div>
</div>

<script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    let appData = {
        currentCategory: null,
        currentCategoryId: null,
        currentStories: [],
        currentStoryIndex: -1,
        categories: {}
    };

    // Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
    const categoryNames = {
        "Prophets": "Ù‚ØµØµ Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡",
        "sahaba": "Ù‚ØµØµ Ø§Ù„ØµØ­Ø§Ø¨Ø©",
        "lessons": "Ù‚ØµØµ Ø§Ù„Ø¹Ø¨Ø±Ø©",
        "quran": "Ù‚ØµØµ Ø§Ù„Ù‚Ø±Ø¢Ù†"
    };

    // Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('DOMContentLoaded', function() {
        loadCategories();
    });

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    function loadCategories() {
        fetch('data/stories/categories.json')
            .then(response => {
                if (!response.ok) throw new Error('Network error');
                return response.json();
            })
            .then(data => {
                appData.categories = data;
                displayCategories();
            })
            .catch(error => {
                console.error('Error loading categories:', error);
                document.getElementById('categoriesError').classList.remove('hidden');
            });
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    function displayCategories() {
        const container = document.getElementById('categoriesList');
        container.innerHTML = '';
        
        const order = ["Prophets", "sahaba", "lessons", "quran"];
        
        order.forEach(categoryId => {
            if (appData.categories[categoryId]) {
                const category = document.createElement('div');
                category.className = 'category-item';
                category.innerHTML = `
                    <h3>${categoryNames[categoryId] || categoryId}</h3>
                    <p style="color: var(--muted); font-size: 14px;">
                        ${appData.categories[categoryId].length} Ù‚ØµØ©
                    </p>
                `;
                
                category.addEventListener('click', () => {
                    showStories(categoryId, appData.categories[categoryId]);
                });
                
                container.appendChild(category);
            }
        });
    }

    // Ø¹Ø±Ø¶ Ù‚ØµØµ Ø§Ù„Ù‚Ø³Ù…
    function showStories(categoryId, stories) {
        appData.currentCategoryId = categoryId;
        appData.currentCategory = stories;
        appData.currentStories = stories;
        
        document.getElementById('sectionTitle').textContent = categoryNames[categoryId] || categoryId;
        showPage('storiesPage');
        
        const container = document.getElementById('storiesList');
        container.innerHTML = '';
        
        stories.forEach((story, index) => {
            const storyElement = document.createElement('div');
            storyElement.className = 'story-item';
            storyElement.innerHTML = `
                <h3>${story.title}</h3>
            `;
            
            storyElement.addEventListener('click', () => {
                loadStory(story.file, index);
            });
            
            container.appendChild(storyElement);
        });
    }

    // ØªØ­Ù…ÙŠÙ„ Ù‚ØµØ© Ù…Ø¹ÙŠÙ†Ø©
    function loadStory(filePath, index) {
        appData.currentStoryIndex = index;
        
        // Ø¥Ø¸Ù‡Ø§Ø± ØµÙØ­Ø© Ø§Ù„Ù‚ØµØ© Ù…Ø¹ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        showPage('storyPage');
        document.getElementById('loading').classList.remove('hidden');
        document.getElementById('storyContent').innerHTML = '';
        document.getElementById('storyError').classList.add('hidden');
        
        // ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚ØµØ©
        fetch(`data/stories/${filePath}`)
            .then(response => {
                if (!response.ok) throw new Error('File not found');
                return response.json();
            })
            .then(storyData => {
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('storyTitle').textContent = storyData.title;
                
                const contentContainer = document.getElementById('storyContent');
                if (storyData.content && Array.isArray(storyData.content)) {
                    storyData.content.forEach(paragraph => {
                        const p = document.createElement('p');
                        p.textContent = paragraph;
                        contentContainer.appendChild(p);
                    });
                } else {
                    contentContainer.innerHTML = '<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ØªÙˆÙ‰ Ù„Ù„Ù‚ØµØ©</p>';
                }
            })
            .catch(error => {
                console.error('Error loading story:', error);
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('storyError').classList.remove('hidden');
            });
    }

    // Ø§Ù„Ù‚ØµØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    function loadPreviousStory() {
        if (appData.currentStoryIndex > 0) {
            const prevStory = appData.currentStories[appData.currentStoryIndex - 1];
            loadStory(prevStory.file, appData.currentStoryIndex - 1);
        }
    }

    // Ø§Ù„Ù‚ØµØ© Ø§Ù„ØªØ§Ù„ÙŠØ©
    function loadNextStory() {
        if (appData.currentStoryIndex < appData.currentStories.length - 1) {
            const nextStory = appData.currentStories[appData.currentStoryIndex + 1];
            loadStory(nextStory.file, appData.currentStoryIndex + 1);
        }
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
    function showPage(pageId) {
        // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        document.getElementById(pageId).classList.add('active');
    }

    // Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
    document.addEventListener('keydown', function(event) {
        // Ø²Ø± Ø§Ù„Ù‡Ø±ÙˆØ¨ Ù„Ù„Ø±Ø¬ÙˆØ¹
        if (event.key === 'Escape') {
            if (document.getElementById('storyPage').classList.contains('active')) {
                showPage('storiesPage');
            } else if (document.getElementById('storiesPage').classList.contains('active')) {
                showPage('categoriesPage');
            }
        }
        
        // Ø§Ù„Ø£Ø³Ù‡Ù… Ù„Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù‚ØµØµ
        if (document.getElementById('storyPage').classList.contains('active')) {
            if (event.key === 'ArrowRight') {
                loadNextStory();
            } else if (event.key === 'ArrowLeft') {
                loadPreviousStory();
            }
        }
    });
</script>

</body>
  </html>

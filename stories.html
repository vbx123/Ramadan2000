<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>القصص الإسلامية</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0f2a24;
  --card:#163b33;
  --primary:#d4af37;
  --text:#ffffff;
  --muted:#cfd8d3;
}
body{
  margin:0;
  font-family:Cairo;
  background:var(--bg);
  color:var(--text);
}
header{
  padding:16px;
  text-align:center;
  color:var(--primary);
}
.list{padding:16px}
.item{
  background:var(--card);
  padding:14px;
  border-radius:14px;
  margin-bottom:12px;
  cursor:pointer;
  transition:.3s;
}
.item:hover{transform:translateY(-4px)}
.back{
  color:var(--muted);
  margin-bottom:12px;
  cursor:pointer;
}
.error{
  padding:20px;
  text-align:center;
  color:var(--muted);
  display:none;
}
</style>
</head>

<body>

<header>
  <h2>القصص الإسلامية</h2>
</header>

<div class="list" id="list"></div>

<div class="error" id="error">
تعذر الوصول للبيانات، الرجاء إعادة التشغيل<br>
وإذا استمرت المشكلة تواصل مع الإدارة
</div>

<script>
const list = document.getElementById("list");
const errorBox = document.getElementById("error");

// أسماء الأقسام بالعربية
const categoryNames = {
  "Prophets": "قصص الأنبياء",
  "sahaba": "قصص الصحابة",
  "lessons": "قصص للعبرة",
  "quran": "قصص من القرآن"
};

// تحميل فهرس القصص
fetch("data/stories/categories.json")
  .then(r => r.json())
  .then(showCategories)
  .catch(showError);

function showCategories(data){
  list.innerHTML = "";
  
  // عرض الأقسام بالترتيب المطلوب
  ["Prophets", "sahaba", "lessons", "quran"].forEach(catId => {
    if (data[catId]) {
      const div = document.createElement("div");
      div.className = "item";
      div.textContent = categoryNames[catId] || catId;
      div.onclick = () => loadCategory(catId, data[catId]);
      list.appendChild(div);
    }
  });
}

function loadCategory(catId, items){
  list.innerHTML = `<div class="back" onclick="location.reload()">← رجوع للأقسام</div>`;
  
  items.forEach(item => {
    const div = document.createElement("div");
    div.className = "item";
    div.textContent = item.title;
    div.onclick = () => {
      // تمرير القسم واسم الملف
      location.href = `story-view.html?file=${item.file}`;
    };
    list.appendChild(div);
  });
}

function showError(){
  errorBox.style.display = "block";
}
</script>

</body>
</html>  

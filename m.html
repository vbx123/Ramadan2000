Ø´<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø³Ø¨Ø­Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</title>

<style>
/* === Ù†ÙØ³ Ø§Ù„Ø³ØªØ§ÙŠÙ„ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ === */
:root{
  --bg:#f2f6f5;
  --card:#ffffff;
  --primary:#2fa38c;
  --accent:#d4b44c;
  --text:#1a1a1a;
}
body.dark{
  --bg:#0e1b1a;
  --card:#142726;
  --primary:#41c9ad;
  --accent:#e6cc6a;
  --text:#f1f1f1;
}
*{box-sizing:border-box;font-family:"Segoe UI",Tahoma,sans-serif;}
body{margin:0;background:var(--bg);color:var(--text);height:100vh;overflow:hidden;}
.top-bar{display:flex;gap:10px;padding:14px;}
select,.mode-btn{flex:1;padding:12px;border-radius:16px;border:none;background:var(--card);color:var(--text);font-size:15px;box-shadow:0 0 15px rgba(0,0,0,.08);}
.card-area{height:200px;display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative;}
.card{width:88%;min-height:150px;background:var(--card);border-radius:26px;padding:34px 22px;text-align:center;font-size:18px;line-height:1.9;position:absolute;border:2px solid var(--primary);box-shadow:0 0 25px rgba(47,163,140,.45),0 0 50px rgba(47,163,140,.25);transition:.4s;}
.card-header,.card-footer{position:absolute;left:50%;transform:translateX(-50%);font-size:13px;color:var(--accent);}
.card-header{top:10px}
.card-footer{bottom:10px}
.center{opacity:1}
.left{transform:translateX(-120%);opacity:0}
.right{transform:translateX(120%);opacity:0}
.tasbeeh{position:absolute;bottom:10px;width:100%;display:flex;flex-direction:column;align-items:center;gap:14px;margin-top:40px;}
.counter{font-size:42px;color:var(--accent);}
.bead{width:130px;height:130px;border-radius:50%;background:var(--primary);display:flex;justify-content:center;align-items:center;font-size:30px;color:white;box-shadow:0 0 30px rgba(47,163,140,.8),0 0 60px rgba(47,163,140,.4);}
.bead:active{transform:scale(.9)}
.controls button{border:none;padding:10px 22px;border-radius:16px;background:var(--card);color:var(--text);}
</style>
</head>

<body>

<div class="top-bar">
  <select id="azkarSelect"></select>
  <button class="mode-btn" onclick="toggleMode()">Ù„ÙŠÙ„ÙŠ / Ù†Ù‡Ø§Ø±ÙŠ</button>
</div>

<div class="card-area">
  <div class="card center" id="card">
    <div class="card-header" id="cardTitle"></div>
    <div id="cardText">Ø§Ø®ØªØ± Ø§Ù„Ø°ÙƒØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</div>
    <div class="card-footer" id="cardIndex"></div>
  </div>
</div>

<div class="tasbeeh">
  <div class="counter" id="count">0</div>
  <div class="bead" onclick="increment()">ğŸ“¿</div>
  <div class="controls">
    <button onclick="resetCount()">Ù…Ø³Ø­</button>
  </div>
</div>

<audio id="click">
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_6d8b3b5d1a.mp3">
</audio>

<script>
let count = localStorage.getItem("count") || 0;
let azkar = [];
let index = 0;

const card = document.getElementById("card");
const cardText = document.getElementById("cardText");
const cardTitle = document.getElementById("cardTitle");
const cardIndex = document.getElementById("cardIndex");
const countEl = document.getElementById("count");
const sound = document.getElementById("click");
const select = document.getElementById("azkarSelect");

countEl.textContent = count;

/* ===== Load Menu ===== */
fetch("data/menu.json")
  .then(res=>res.json())
  .then(menu=>{
    select.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø°ÙƒØ±</option>`;
    menu.forEach(item=>{
      select.innerHTML += `<option value="${item.id}">${item.title}</option>`;
    });
  });

select.addEventListener("change",()=>loadAzkar(select.value));

/* ===== Load Azkar ===== */
function loadAzkar(type){
  if(!type) return;
  index = 0;
  fetch(`data/${type}.json`)
    .then(res=>res.json())
    .then(data=>{
      cardTitle.textContent = data.title;
      azkar = data.azkar;
      updateCard();
    });
}

function updateCard(){
  cardText.textContent = azkar[index] || "Ø§Ø®ØªØ± Ø§Ù„Ø°ÙƒØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©";
  cardIndex.textContent = azkar.length ? `${index+1} / ${azkar.length}` : "";
}

/* ===== Counter ===== */
function increment(){
  count++;
  localStorage.setItem("count",count);
  countEl.textContent = count;
  sound.currentTime=0;
  sound.play();
}
function resetCount(){
  count=0;
  localStorage.setItem("count",0);
  countEl.textContent=0;
}

/* ===== Swipe ===== */
let startX=0;
card.addEventListener("touchstart",e=>startX=e.touches[0].clientX);
card.addEventListener("touchend",e=>{
  let endX=e.changedTouches[0].clientX;
  if(endX-startX>60 && index>0) slide("right",--index);
  if(startX-endX>60 && index<azkar.length-1) slide("left",++index);
});
function slide(dir){
  card.classList.add(dir);
  setTimeout(()=>{
    updateCard();
    card.className="card center";
  },300);
}

function toggleMode(){
  document.body.classList.toggle("dark");
}
</script>

</body>
  </html>
